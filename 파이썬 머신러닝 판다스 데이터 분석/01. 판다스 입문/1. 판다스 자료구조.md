<h2>📌 PART 1. 판다스 입문</h2>
<h3>✓ 판다스 자료구조</h3>

**판다스의 1차 목적은 서로 다른 여러 가지 유형의 데이터를 공통의 포맷으로 정리하는 것이다.**


<h4>시리즈</h4>
시리즈는 데이터가 순차적으로 나열된 1차원 배열 형태이다. 각 데이터 값은 인덱스와 일대일 대응되며, 인덱스는 데이터 값의 위치를 나타내는 이름표 역할을 한다. 이러한 구조는 파이썬 딕셔너리와 유사하며, 딕셔너리의 키와 값이 `{k:v}` 형태로 짝을 이루는 것과 비슷하다.<br>
<br>

→ **시리즈 만들기**<br>
딕셔너리와 시리즈의 구조가 비슷하기 때문에 딕셔너리를 시리즈로 변환하는 방법을 많이 사용한다. 

```python
딕셔너리 → 시리즈 변환: pandas.Series(딕셔너리)
```
##### <예제1-1> 딕셔너리 → 시리즈 변환
```python
# pandas 불러오기
import pandas as pd

# k:v 구조를 갖는 딕셔너리를 만들고, 변수 dict_data에 저장
dict_data = {'a': 1, 'b': 2, 'c': 3}

# 판다스 Series() 함수로 딕셔너리(dict_data)를 시리즈로 변환. 변수 sr에 저장
sr = pd.Series(dict_data)

print(type(sr)) # 변수 sr의 자료형 출력
print('-' * 40)
print(sr) # 변수 sr에 저장되어 있는 시리즈 객체를 출력
```

<h4>인덱스 구조</h4>
인덱스는 자기와 짝을 이루는 데이터 값의 순서와 주소를 저장한다. 인덱스를 잘 활용하면 데이터 값의 탐색, 정렬, 선택, 결합 등 데이터 조작을 쉽게 할 수 있다. <br>
<br>

```python
인덱스 배열: Series객체.index
```
```python
데이터 값 배열: Series객체.values
```
##### <예제 1-2> 시리즈 인덱스<br>
판다스 Series() 함수를 사용하여 파이썬 리스트를 시리즈로 변환한다. 단, 리스트를 시리즈로 변환할 때는 딕셔너리의 키처럼 인덱스로 변환될 값이 없다. 따라서 인덱스를 별도로 정의하지 않으면 디폴트로 정수형 위치 인덱스(0, 1, 2, …)가 자동으로 지정된다.

```python
import pandas as pd

# 리스트를 시리즈로 변환하여 변수 sr에 저장
list_data = ['2019-01-02', 3.14, 'ABC', 100, True]
sr = pd.Series(list_data)
print(sr)
print('\n')
```
```python
# 인덱스 배열은 변수 idx에 저장, 데이터 값 배열은 변수 val에 저장
idx = sr.index
val = sr.values
print(idx)
print('\n')
print(val)
```

<h4>원소 선택</h4>
원소의 위치를 나타내는 주소 역할을 하는 인덱스를 이용하여 시리즈의 원소를 선택한다. 하나의 원소를 선택할 수도 있고, 여러 원소를 한꺼번에 선택할 수도 있다. 파이썬 리스트 슬라이싱(slicing) 기법과 비슷하게 인덱스 범위를 지정하여 원소를 선택하는 방법도 있다. 정수형 위치 인덱스는 대괄호([]) 안에 위치를 나타내는 숫자를 입력하는데 반해 인덱스 이름(라벨)을 사용할 때는 대괄호([]) 안에 이름과 함께 따옴표를 입력한다.<br>

##### <예제 1-3> 시리즈 원소 선택
```python
#imprt pandas as pd

# 투플을 시리즈로 변환(index 옵션에 인덱스 이름을 저장)
tup_data = ('영인', '2010-05-01', '여', True)
sr = pd.Series(tup_data, index=['이름', '생년월일', '성별','학생여부'])

print(sr)
print('\n')
# 원소를 1개 선택 
print(f'sr의 1번째 원소를 선택 (정수형 위치 인덱스를 활용)-> {sr[0]}')
print(f"'이름' 라벨을 가진 원소를 선택 (인덱스 이름을 활용)-> {sr['이름']}")
```
```python
# 여러 개의 원소를 선택 (인덱스 리스트 활용)
print(sr[[0, 2]])
print('\n')
print(sr[['생년월일', '성별']])
```

<h4>데이터프레임</h4>
데이터프레임은 2차원 배열이다. 행과 열로 만들어지는 2차원 배열 구조는 마이크로소프트 엑셀(Excel)과 관계형 데이터베이스(RDBMS) 등 컴퓨터 관련 다양한 분야에서 사용된다. 데이터프레임의 열은 각각 시리즈 객체이다. 시리즈를 열벡터(vector)라고 하면, 데이터프레임은 여러개의 열벡터들이 같은 행 인덱스를 기준으로 줄지어 결합된 2차원 벡터 또는 행렬이다. 열은 공통의 속성을 갖는 일련의 데이터를 나타내고 행은 개별 관측대상에 대한 다양한 속성 데이터들의 모음인 레코드(record)가 된다.<br>
<br>

→ **데이터프레임 만들기**<br>
데이터프레임을 만들기 위해서는 같은 길이(원소의 개수가 동일한)의 1차원 배열 여러 개가 필요하다. 데이터프레임은 여러 개의 시리즈(열, column)를 모아 놓은 집합으로 이해하면 된다. 

```python
딕셔너리 → 데이터프레임 변환: pandas.DataFrame(딕셔너리 객체)
```
##### <예제 1-4> 딕셔너리 → 데이터프레임 변환
```python
import pandas as pd

# 열이름을 key로 하고, 리스트를 value로 갖는 딕셔너리 정의(2차원 배열)
dict_data = {'c0': [1, 2, 3], 'c1': [4, 5, 6],'c2': [7, 8, 9], 'c3': [10, 11, 12], 'c4': [13, 14, 15]}

df = pd.DataFrame(dict_data)

# df의 자료형 출력
print(type(df))
print('\n')
print(df)
```

<h4>행 인덱스/열 이름 설정</h4>
데이터프레임의 구조적 특성 때문에 2차원 배열 형태의 데이터를 데이터프레임으로 변환하기 쉽다. 2차원 배열을 DataFrame() 함수 인자로 전달하여 데이터프레임으로 변환할 때 행 인덱스와 열 이름 속성을 사용자가 직접 지정할 수도 있다. <br>
<br>

```python
행 인덱스/열 이름 설정: pandas.DataFrame(2차원 배열,
                                        index=행 인덱스 배열,
                                        columns=열 이름 배열)
```
##### <예제 1-5> 행 인덱스/열 이름 설정
```python
import pandas as pd

# 행 인덱스/열 이름 지정하여, 데이터프레임 만들기
df = pd.DataFrame([[15, '남', '덕명중'],
                  [17, '여', '수리중']],
                  index = ['준서', '예은'],
                  columns = ['나이', '성별', '학교'])

# 행 인덱스, 열 이름 확인하기 
print(df)
print('\n')
print(df.index)
print('\n')
print(df.columns)
```
데이터프레임 df의 행 인덱스와 열 이름 객체를 나타내는 df.index와 df.columns의 속성에 새로운 배열을 할당하는 방식으로 행 인덱스와 열 이름을 변경할 수 있다. 
```python
행 인덱스 변경: DataFrame 객체.index = 새로운 행 인덱스 배열
열 이름 변경: DataFrame 객체.columns = 새로운 열 이름 배열 
```
```python
# 행 인덱스, 열 이름 변경하기 
df.index = ['학생1', '학생2']
df.columns = ['연령', '남녀', '소속']

display(df)   # 데이터 프레임
print('\n')
print(df.index)   # 행 인덱스
print('\n')
print(df.columns)   # 열 이름
```
데이터프레임에 rename() 메소드를 적용하면 행 인덱스 또는 열 이름의 일부를 선택하여 변경할 수도 있다. 단, 원본 객체를 직접 수정하는 것이 아니라 새로운 데이터 프레임 객체를 반환하는 점에 유의한다. 원본 객체를 변경하려면 inplace=True 옵션을 사용한다. 
```python
행 인덱스 변경: DataFrame 객체.rename(index = {기존 인덱스: 새 인덱스, …})
열 이름 변경: DataFrame 객체.rename(columns = {기존 이름: 새 이름, …})
```
##### <예제 1-6> 행 인덱스/열 이름 변경
```python
import pandas as pd

# 행 인덱스/열 이름 지정하여, 데이터프레임 만들기
df = pd.DataFrame([[15, '남', '덕명중'],
                  [17, '여', '수리중']],
                  index = ['준서', '예은'],
                  columns = ['나이', '성별', '학교'])

# 열 이름 중, '연령'을 '나이'로, '남여'를 '성별'로, '소속'을 '학교'로 바꾸기
df.rename(columns = {'연령': '나이', '남여': '성별', '소속': '학교'}, inplace=True)

# df의 행 인덱스 중에서, '학생1'을 '준서'로, '학생2'를 '예은'으로 바꾸기
df.rename(index = {'학생1': '준서', '학생2': '예은'}, inplace=True)
df
```

<h4>행/열 삭제</h4>
데이터프레임의 행 또는 열을 삭제하는 명령으로 drop() 메소드가 있다. 행을 삭제할 때는 축(axis) 옵션으로 axis=0을 입력하거나, 별도로 입력하지 않는다. 반면 축 옵션으로 axis=1을 입력하면 열을 삭제한다. <br>
<br>

```python
행 삭제: DataFrame 객체.drop(행 인덱스 또는 배열, axis=0)
열 삭제: DataFrame 객체.drop(열 이름 또는 배열, axis=1)
```
##### <예제 1-7> 행 삭제 
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'수학': [90, 80, 70], '영어': [98, 89, 95],
            '음악': [85, 95, 100], '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data, index = ['서준', '우현', '인아'])
print(df)
print('\n')

# 데이터프레임 df를 복제하여 변수 df2에 저장. df2의 1개 행(row)을 삭제
df2 = df[:]
df2.drop('우현', inplace=True)
print(id(df2))
print('\n')

# 데이터프레임 df를 복제하여 변수 df3에 저장. df3의 1개 행(row)을 삭제
df3 = df[:]
df3.drop(['우현', '인아'], axis=0, inplace=True) 
df3
```
##### <예제 1-8> 열 삭제 
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'수학': [90, 80, 70], '영어': [98, 89, 95],
            '음악': [85, 95, 100], '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data, index = ['서준', '우현', '인아'])
print(df)
print('\n')

# 데이터프레임 df를 복제하여 변수 df4에 저장. df4의 1개 열(column)을 삭제
df4 = df.copy()
df4.drop('수학', axis=1, inplace=True)
df4

# 데이터프레임 df를 복제하여 변수 df5에 저장. df5의 2개 열(column)을 삭제
df5 = df.copy()
df5.drop(['영어', '음악'], axis=1, inplace=True)
df5
```

<h4>행 선택</h4>
데이터프레임의 행 데이터를 선택하기 위해서는 loc과 iloc 인덱서를 사용한다. 인덱스 이름을 기준으로 행을 선택할 때는 loc을 이용하고, 정수형 위치 인덱스를 사용할 때는 iloc을 이용한다.<br>
<br>

##### <예제 1-9> 행 선택
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'수학': [90, 80, 70], '영어': [98, 89, 95],
            '음악': [85, 95, 100], '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data, index = ['서준', '우현', '인아'])
print(df)
print('\n')

# 행 인덱스를 사용하여 행 1개를 선택 
label1 =df.loc['서준']   #loc 인덱서 활용
position1 = df.iloc[0]   #iloc 인덱서 활용
print('label1(loc)')
display(label1)

print('-' * 40)

print('position(iloc)')
display(position1)
```
```python
# 행 인덱스를 사용하여 2개 이상의 행 선택
label2 = df.loc[['서준', '우현']]
position2 = df.iloc[[0, 1]]

print('label2(loc)')
display(label2)

print('-' * 40)

print('position2(iloc)')
display(position2)
```
```python
# 행 인덱스의 범위를 지정하여 행 선택
label3 = df.loc['서준': '우현']
position3 = df.iloc[0: 1]

print('label3(loc)')
display(label3)

print('-' * 40)

print('position3(iloc)')
display(position3)
```

<h4>열 선택</h4>
데이터프레임의 열 데이터를 1개만 선택할 때는 대괄호([])안에 열 이름을 따옴표와 함께 입력하거나 도트(.) 다음에 열 이름을 엽력하는 두 가지 방식을 사용한다. 두 번째 방법은 반드시 열 이름이 문자열일 경우에만 가능하다.<br>
<br>

```python
열 1개 선택(시리즈 생성): DataFrame 객체['열 이름'] 또는 DataFrame 객체.열 이름
```
대괄호 안에 열 이름의 리스트를 입력하면 리스트의 원소인 열을 모두 선택하여 데이터프레임으로 반환다. 또한 리스트의 원소를 열 이름 한 개만 있는 경우에도 2중 대괄호([[]])를 사용하는 것이 되어 반환되는 객체는 시리즈가 아니라 데이터프레임이 된다. 
```python
열 n개 선택(데이터프레임 생성): DataFrame 객체[[열1, 열2, …, 열n]]
```
##### <예제 1-10> 열 선택
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)
print(type(df))
print('\n')

# '수학' 점수 데이터만 선택, 변수 math1에 저장
math1 = df['수학']
print(math1)
print(type(math1))
print('\n')

# '영어' 점수 데이터만 선택, 변수 english에 저장
english = df.영어
print(english)
print(type(english))

```
```python
# '음악', '체육' 점수 데이터를 선택. 변수 music_gum에 저장
music_gum = df[['음악', '체육']]
music_gum

# '수학' 점수 데이터만 선택, 변수 math2에 저장
math2 =df[['수학']]
math2
```

→ **범위 슬라이싱의 고급활용**<br>
판다스 데이터프레임의 원소 데이터를 선택할 때 범위를 지정하여 슬라이싱하는 방법 

```python
범위 슬라이싱: DataFrame 객체.iloc[ 시작 인덱스 : 끝 인덱스 : 슬라이싱 간격]
```
```python
df.iloc[::2]   # 0행부터 2행 간격으로 선택
df.iloc[0:3:2]   # 0행부터 2행까지 2행 간격
df.iloc[::-1]   # df의 모든 행을 선택하여 역순으로 정렬
```

<h4>원소 선택</h4>
데이터프레임의 행 인덱스와 열 이름을 [행, 열] 형식의 2차원 좌표로 입력하여 원소 위치를 지정하는 방법이다. 원소가 위치하는 행과 열의 좌표를 입력하면 해당 위치의 원소가 반환된다. 1개의 행과 2개 이상의 열을 선택하거나 2개 이상의 행과 1개의 열을 선택하는 경우 시리즈 객체가 반환된다. 2개 이상의 행과 2개 이상의 열을 선택하면 데이터프레임 객체를 반환한다.<br>
<br>

```python
인덱스 이름: DataFrame 객체.loc[행 인덱스, 열 이름]
정수 위치 인덱스: DataFrame 객체.loc[행 번호, 열 번호]
```
##### <예제 1-11> 원소 선택
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)

# '이름' 열을 새로운 인덱스로 지정하고, df 객체에 변경사항 반영
df.set_index('이름', inplace=True)
df
```
```python
# 데이터프레임 df의 특정 원소 1개 선택('서준'의 '음악' 점수)
a = df.loc['서준', '음악']
a
b = df.iloc[0,2]
b
```
```python
# 데이터프레임 df의 특정 원소 2개 선택('서준'의 '음악', '체육' 점수)
c = df.loc['서준', ['음악', '체육']]
c
d = df.iloc[0, [2, 3]]
d
e = df.loc['서준', '음악': '체육']
e
f = df.iloc[0, 2:]
f
```
```python
# df의 2개 이상의 행과 열로부터 원소 선택('서준', '우현'의 '음악', '체육' 점수)
g = df.loc[['서준', '우현'], ['음악', '체육']]
g
h = df.iloc[[0, 1], [2, 3]]
h
i = df.loc['서준': '우현', '음악': '체육']
i
j = df.iloc[0:2, 2:]
print(j)
```

<h4>열 추가</h4>
데이터프레임에 열을 추가하는 방법이다. 추가하려는 열 이름과 데이터 값을 다음과 같은 형식으로 입력한다.<br>
<br>

```python
열 추가: DataFrame 객체['추가하려는 열 이름'] = 데이터 값
```
##### <예제 1-12> 열 추가 
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)

# 데이터프레임 df에 '국어' 점수 열(colum)을 추가. 데이터 값은 80 지정
df['국어'] = 80
df
```    

<h4>행 추가 </h4>
데이터프레임에 행을 추가하는 방법이다. 추가하려는 행 이름과 데이터 값을 loc 인덱서를 사용하여 입력한다. 하느이 데이터 값을 입력하거나 열의 개수에 맞게 배열 형태로 여러 개의 값을 입력할 수 있다. 전자의 경우 행의 모든 원소에 같은 값이, 후자의 경우 배열의 순서대로 열 위치에 값이 하나씩 추가된다.<br>
<br>

```python
행 추가: DataFrame.loc['새로운 행 이름'] = 데이터 값 (또는 배열)
```
##### <예제 1-13> 행 추가 
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)

# 새로운 행(row)을 추가 - 같은 원소 값을 입력 
df.loc[3] = 0
df
print('\n')

# 새로운 행(row)을 추가 - 원소 값 여러 개의 배열 입력
df.loc[4] = ['동규', 90, 80, 70, 60]
df
print('\n')

# 새로운 행(row)을 추가 - 기존 행 복사
df.loc['행5'] = df.loc[3]
df
```  

<h4>원소 값 변경 </h4>
데이터프레임의 특정 원소를 선택하고 새로운 데이터 값을 지정해주면 원소값이 변경된다. 변경할 원소를 선택할 때 데이터프레임 인덱싱과 슬라이싱 기법을 사용한다.<br>
<br>

```python
원소 값 변경: DataFrame 객체의 일부분 또는 원소를 선택 = 새로운 값
```
##### <예제 1-14> 원소 값 변경
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)

# '이름' 열을 새로운 인덱스로 지정하고, df 객체에 변경사항 반영
df = pd.DataFrame(exam_data)
df.set_index('이름', inplace=True)
df

# 데이터프레임 df의 특정 원소를 변경하는 방법: '서준'의 '체육' 점수
df.iloc[0][3] = 80
df
print('\n')

df.loc['서준']['체육'] = 90
df
print('\n')

df.loc['서준', '체육'] = 100
df
```    
```python
# 데이터프레임 df의 원소 여러 개를 변경하는 방법: '서준'의 음악, '체육' 점수
df.loc['서준', ['음악', '체육']] = 50
df
print('\n')

df.loc['서준', ['음악', '체육']] = 100, 50
df
```    

<h4>행, 열의 위치 바꾸기 </h4>
데이터프레임의 행과 열을 서로 맞바꾸는 방법이다. 선형대수학의 전치행렬과 같은 개념이다.<br>
<br>

```python
행, 열 바꾸기: DataFrame 객체.transpose() 또는 DataFrame 객체.T
```
##### <예제 1-15> 행, 열 바꾸기
```python
import pandas as pd

# DataFrame() 함수로 데이터프레임 변환. 변수 df에 저장
exam_data = {'이름': ['서준', '우현', '인아'],
            '수학': [90, 80, 70], 
            '영어': [98, 89, 95],
            '음악': [85, 95, 100], 
            '체육': [100, 90, 90]}

df = pd.DataFrame(exam_data)
print(df)
print('\n')

# 데이터프레임 df를 전치하기 (메소드 활용)
df = df.transpose()
df
print('\n')

# 데이터프레임 df를 다시 전치하기 (클래스 속성 활용)
df = df.T
df
```